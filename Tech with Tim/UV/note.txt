Notes uv (cheat sheet)

1. ğŸŒŸ Quâ€™est-ce que uv ?

uv est un outil moderne tout-en-un pour Python.
Il remplace :
    - pip (installation de packages)
    - pipx (exÃ©cution dâ€™outils isolÃ©s)
    - virtualenv / venv (gestion dâ€™environnements virtuels)
    - pip-tools (rÃ©solution de dÃ©pendances)
    - poetry / pdm (gestion de projets)
    - pyenv (gestion de versions de Python)

Objectif : rendre Python simple, rapide et fiable.

Points clÃ©s :
    - Ultra rapide (Ã©crit en Rust)
    - Peut installer et utiliser Python automatiquement
    - Fonctionne avec pyproject.toml et les scripts autonomes
    - Compatible avec tout lâ€™Ã©cosystÃ¨me Python


2. âš™ï¸ Installation de uv

Installer (Linux, macOS, Windows) :
    curl -LsSf https://astral.sh/install.sh | sh

VÃ©rifier lâ€™installation :
    uv --version


3. ğŸ§© Les 3 usages principaux de uv

3.1. ExÃ©cuter du Python
    uv run main.py
uv tÃ©lÃ©charge automatiquement une version de Python si nÃ©cessaire.

ExÃ©cuter avec une version spÃ©cifique :
    uv run --python 3.10 main.py


3.2. CrÃ©er et gÃ©rer un projet

CrÃ©er un nouveau projet Python :
    uv init myproject

CrÃ©er un script autonome avec ses dÃ©pendances intÃ©grÃ©es :
    uv init --script main.py

Exemple de bloc ajoutÃ© dans le script :
    # /// script
    # requires-python = ">=3.12"
    # dependencies = ["rich"]
    # ///


3.3. Installer des packages

Ajouter des dÃ©pendances dans un projet :
    uv add requests numpy

Ajouter des dÃ©pendances dans un script :
    uv add --script main.py requests rich

Installer un package temporairement (sans lâ€™ajouter au projet) :
    uv run --with pandas analyse.py


4. ğŸ“¦ Comprendre le systÃ¨me de dÃ©pendances uv

uv utilise le fichier :
    pyproject.toml

Ce fichier contient :
    - dÃ©pendances
    - configuration
    - version de Python
    - scripts

Exemple :
    [project]
    name = "demo"
    dependencies = [
        "requests",
        "rich>=13",
    ]
    requires-python = ">=3.11"

uv gÃ©nÃ¨re aussi :
    uv.lock  â†’ versions figÃ©es pour une reproductibilitÃ© garantie.


5. ğŸ§ª Environnements Python avec uv

CrÃ©er un environnement virtuel :
    uv venv

CrÃ©er un venv avec une version spÃ©cifique :
    uv venv --python 3.12

Activer le venv :
    Linux/macOS : source .venv/bin/activate
    Windows    : .venv\Scripts\activate

Installer dans le venv :
    uv pip install fastapi


6. ğŸš€ uv pour les scripts (fonction phare)

CrÃ©er un script avec gestion automatique des dÃ©pendances :
    uv init --script main.py

Ajouter des packages au script :
    uv add --script main.py rich requests

Lancer le script :
    uv run main.py

IdÃ©al pour :
    - petits programmes
    - automatisation
    - outils internes
    - datascience / notebooks


7. ğŸ§¹ uv et lâ€™Ã©cosystÃ¨me Python

uv nâ€™est pas un framework.
Il est compatible avec :
    âœ” PyPI
    âœ” FastAPI / Django / Flask
    âœ” Jupyter
    âœ” Poetry / pip / virtualenv
    âœ” Wheels, sdists, extras (package[extra])

uv sâ€™intÃ¨gre sans casser votre workflow existant.


8. ğŸ“ RÃ©sumÃ© (cheat sheet)

CrÃ©er un projet :             uv init myproject
CrÃ©er un script :             uv init --script main.py
Ajouter dÃ©pendances :         uv add requests rich
Ajouter (script) :            uv add --script main.py requests
ExÃ©cuter :                    uv run main.py
ExÃ©cuter avec Python X :      uv run --python 3.10 main.py
Installer temporaire :        uv run --with pandas script.py
CrÃ©er un venv :               uv venv --python 3.12
Installer dans venv :         uv pip install numpy
